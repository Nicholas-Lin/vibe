(this.webpackJsonpvibe=this.webpackJsonpvibe||[]).push([[0],{100:function(e,t,a){},125:function(e,t,a){},128:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(22),i=a.n(s),c=(a(97),a(98),a(6)),o=a(7),l=a(9),u=a(8),p=(a(99),window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{})),m="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("03448805c58d4c5ba555ea203c8ce771","&redirect_uri=").concat("https://nicholas-lin.github.io/vibe/","&scope=").concat(["playlist-read-private","user-top-read","user-read-recently-played"].join("%20"),"&response_type=token&show_dialog=true"),h=a(19),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.props.isLoggedIn?null:n.a.createElement("div",null,n.a.createElement(h.a,{className:"submit-button",variant:"success",onClick:function(){return e.props.handleLogin()}},"Login with Spotify"))}}]),a}(n.a.Component),f=a(11),v=a(27);a(100);var b=function(){return n.a.createElement("div",{className:"sound-icon disabled"},n.a.createElement("div",{className:"sound-wave"},n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"}),n.a.createElement("i",{className:"bar"})))},y=a(14),g=a.n(y);var k=function(e){return e.isLoggedIn?null:n.a.createElement(v.a,null,n.a.createElement(f.a,{className:"d-flex align-items-center flex-column login justify-content-center login"},n.a.createElement(g.a,{duration:2e3},n.a.createElement("header",null," Vibe "),n.a.createElement(b,null),n.a.createElement(g.a,{delay:1e3},n.a.createElement(d,{isLoggedIn:e.isLoggedIn,handleLogin:function(){return e.handleLogin()}})),n.a.createElement("h4",{className:"mt-5"},"Get insights into your vibe."),n.a.createElement("h6",{className:"mt-5"}," ","Created by"," ",n.a.createElement("a",{href:"https://nicholas-lin.github.io/",target:"_blank",rel:"noopener noreferrer"}," ","Nicholas Lin."," ")," "),n.a.createElement(g.a,{delay:2e3},n.a.createElement("h6",null,"Your information is never stored. Powered by"," ",n.a.createElement("a",{href:"https://developer.spotify.com/documentation/web-api/",target:"_blank ",rel:"noopener noreferrer"}," ","Spotify's API."," ")," "),n.a.createElement("h6",null,"Give this project a"," ",n.a.createElement("span",{role:"img","aria-label":"star emoji"},"\ud83c\udf1f")," ","on",n.a.createElement("a",{href:"https://github.com/Nicholas-Lin/vibe",target:"_blank",rel:"noopener noreferrer"}," ","Github."))))))},E=a(10),j=a.n(E),x=a(57),w=a(15),O=a(20),C=a.n(O);C.a.defaults.global.defaultFontColor="white",C.a.defaults.global.defaultColor="white",C.a.defaults.scale.gridLines.color="rgb(83,83,83)",C.a.defaults.LineWithLine=C.a.defaults.line,C.a.controllers.LineWithLine=C.a.controllers.line.extend({draw:function(e){if(C.a.controllers.line.prototype.draw.call(this,e),this.chart.tooltip._active&&this.chart.tooltip._active.length){var t=this.chart.tooltip._active[0],a=this.chart.ctx,r=t.tooltipPosition().x,n=this.chart.legend.bottom,s=this.chart.chartArea.bottom;a.save(),a.beginPath(),a.moveTo(r,n),a.lineTo(r,s),a.lineWidth=2,a.strokeStyle="rgb(255, 255, 255, 0.5)",a.stroke(),a.restore()}}});var T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).chartRef=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){new C.a(this.chartRef.current,{type:"LineWithLine",data:{labels:this.props.data.labels,datasets:this.props.data.datasets.map((function(e){return{data:e.data,label:e.label,borderColor:e.borderColor,borderWidth:2,fill:e.fill,backgroundColor:e.backgroundColor,pointBackgroundColor:e.borderColor,pointBorderWidth:1,pointBorderColor:"black",pointRadius:5,pointHitRadius:6,pointHoverBackgroundColor:"black",pointHoverBorderColor:e.borderColor}}))},options:{maintainAspectRatio:!1,tooltips:{mode:"index",intersect:!1,titleFontColor:"black",bodyFontColor:"black",backgroundColor:"rgba(255, 255, 255, 0.9)",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),a+=Math.round(e.yLabel),a}}}}})}},{key:"render",value:function(){return n.a.createElement(f.a,{className:" h-100 d-flex flex-column justify-content-between align-items-center p-0"},n.a.createElement("h3",null,this.props.title),n.a.createElement("p",null,this.props.description),n.a.createElement("div",{className:"line-chart-container"},n.a.createElement("canvas",{ref:this.chartRef})))}}]),a}(n.a.Component),S=a(29),L=a.n(S),N=function(){function e(t){Object(c.a)(this,e),this.token=t}return Object(o.a)(e,[{key:"getUserFavorites",value:function(){var e=Object(w.a)(j.a.mark((function e(t,a){var r,n,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:20,n="https://api.spotify.com/v1/me/top/".concat(t),e.next=4,L.a.get(n,{headers:{Authorization:"Bearer ".concat(this.token)},params:{time_range:a,limit:r}});case 4:return s=e.sent,e.abrupt("return",s.data.items);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchForPlaylist",value:function(){var e=Object(w.a)(j.a.mark((function e(t,a){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.spotify.com/v1/search",e.next=3,L.a.get("https://api.spotify.com/v1/search",{headers:{Authorization:"Bearer ".concat(this.token)},params:{q:t.join("%20"),type:"playlist",limit:"10"}});case 3:return r=e.sent,n=r.data.playlists.items.filter((function(e){var r=!0;return t.forEach((function(t){r=r&&e.name.toLowerCase().includes(t.toLowerCase())})),r&&e.owner.display_name.toLowerCase().includes(a.toLowerCase())})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getPlaylist",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.spotify.com/v1/playlists/",e.next=3,L.a.get("".concat("https://api.spotify.com/v1/playlists/").concat(t),{headers:{Authorization:"Bearer ".concat(this.token)},params:{fields:"name,tracks.items(track)"}});case 3:return a=e.sent,e.abrupt("return",{name:a.data.name,tracks:a.data.tracks.items});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentTracks",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.spotify.com/v1/me/player/recently-played",e.next=3,L.a.get("https://api.spotify.com/v1/me/player/recently-played",{headers:{Authorization:"Bearer ".concat(this.token)},params:{limit:50}});case 3:return t=e.sent,e.abrupt("return",t.data.items);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTrackFeatures",value:function(){var e=Object(w.a)(j.a.mark((function e(t,a){var r,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.forEach((function(e){e.track?r.push(e.track.id):r.push(e.id)})),"https://api.spotify.com/v1/audio-features",e.next=5,L.a.get("https://api.spotify.com/v1/audio-features",{headers:{Authorization:"Bearer ".concat(this.token)},params:{ids:r.join()}});case 5:return n=e.sent,s=[],n.data.audio_features.forEach((function(e){var r={};a.forEach((function(a){if("popularity"===a){var n=t.find((function(t){return(t.track?t.track.id:t.id)===e.id}));r[a]=n.track?n.track.popularity:n.popularity}else Object.keys(e).includes(a)&&(r[a]=e[a])})),s.push(r)})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),I=a(17),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={token:r.props.token,data:[],features:[],isLoading:!0},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,a,r,n,s,i=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N(this.props.token),a=["id","acousticness","danceability","energy","valence"],e.next=4,t.searchForPlaylist(["Your Top Songs"],"Spotify");case 4:return r=e.sent,e.next=7,Promise.all(r.map(function(){var e=Object(w.a)(j.a.mark((function e(r){var n,s,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(19!==r.name.length){e.next=11;break}return e.next=3,t.getPlaylist(r.id);case 3:return n=e.sent,s=n.name.split(" ").pop(),c={year:s,tracks:n.tracks},i.setState({data:[].concat(Object(x.a)(i.state.data),[c])}),e.next=9,t.getTrackFeatures(c.tracks,a);case 9:o=e.sent,i.computeFeatures(s,o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.next=9,t.getUserFavorites("tracks","medium_term",50);case 9:return n=(n=e.sent).map((function(e){return{track:e}})),e.next=13,t.getTrackFeatures(n,a);case 13:s=e.sent,this.computeFeatures("2020",s),this.createGraphData();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"computeFeatures",value:function(e,t){var a={acousticness:0,danceability:0,energy:0,valence:0};for(var r in t.forEach((function(e){for(var t in e)"id"!==t&&(a[t]+=e[t])})),a)a[r]=Math.round(100*(100*a[r]/t.length+Number.EPSILON))/100;this.setState({features:[].concat(Object(x.a)(this.state.features),[{year:e,averages:a}])})}},{key:"createGraphData",value:function(){var e={acousticness:[],danceability:[],energy:[],valence:[]},t=[].concat(this.state.features).sort((function(e,t){return e.year.localeCompare(t.year)}));for(var a in t.forEach((function(t){for(var a in t.averages)e[a].push(t.averages[a])})),e)for(;e[a].length<5;)e[a].unshift(null);var r={},n={acousticness:[15.88,16.63,19.57,22.16,21.39],danceability:[63.25,69.68,71.65,71.38,71.99],energy:[67.24,66.07,65.91,64.06,65.05],valence:[45.15,51.7,48.44,54.6,53.1]},s={acousticness:[28.03,28.99,27.19,28.93,24.74],danceability:[60,61.23,66.5,64.42,67.31],energy:[59.29,58.67,59.06,57.88,61.19],valence:[43.08,41.45,44.71,46.59,48.28]};for(var i in e)r[i]={labels:["2016","2017","2018","2019","2020"],datasets:[{data:e[i],label:"Your Top Songs",fill:!0,borderColor:"rgba(29,185,84,1)",backgroundColor:"rgba(29,185,84,0.4)",spanGaps:!1},{data:s[i],label:"Average Song",fill:!1,borderColor:"rgba(255, 255, 255, 0.9)"},{data:n[i],label:"Top Spotify Songs",fill:!1,borderColor:"rgba(255,99,132,1)"}]};this.setState({formattedData:r,isLoading:!1}),this.props.load()}},{key:"render",value:function(){var e="Valence (positivity) describes how happy, cheerful, and euphoric a track feels, while tracks with low valence tend to sound sad, depressed, or angry.",t="Describes how suitable a track is for dancing based on a combination of its tempo, rhythm stability, and beat strength.",a="Describes how fast, loud, and noisy a track feels. For example, death metal has high energy, while a Bach prelude scores low on the scale.",r="Describes how many more elements of a song are acoustic, as opposed to electric. Songs with a higher score are more likely to be acoustic..";return!this.state.isLoading&&n.a.createElement("div",null,n.a.createElement(v.a,{fluid:"lg"},n.a.createElement(g.a,null,n.a.createElement("header",null,"Your Vibe"),n.a.createElement(I.a,{className:"mt-4 mb-4"},n.a.createElement(f.a,{md:6,className:"mt-4 mb-4"},n.a.createElement(T,{title:"Valence (Happiness)",description:e,data:this.state.formattedData.valence})),n.a.createElement(f.a,{md:6,className:"mt-4 mb-4"},n.a.createElement(T,{title:"Danceability",description:t,data:this.state.formattedData.danceability}))),n.a.createElement(I.a,{className:"mb-4"},n.a.createElement(f.a,{md:6,className:"mt-4 mb-4"},n.a.createElement(T,{title:"Energy",description:a,data:this.state.formattedData.energy})),n.a.createElement(f.a,{md:6,className:"mt-4 mb-4"},n.a.createElement(T,{title:"Acousticness",description:r,data:this.state.formattedData.acousticness}))),n.a.createElement("hr",null))))}}]),a}(n.a.Component),P=a(33),F=a(23),R=a(41),D=a(74),M=(a(124),a(125),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={score:0},r}return Object(o.a)(a,[{key:"render",value:function(){for(var e,t,a=this,r=[0,30,50,70,90,100],s=["Hipster","Eccentric","Trendy","Mainstream","Basic"],i=["\ud83e\uddd0","\ud83e\udd14","\ud83d\ude0e","\ud83e\udd29","\ud83d\udc81\u200d\u2640\ufe0f"],c=0;c<r.length-1;c++){var o=r[c],l=r[c+1];if(this.props.score>=o&&this.props.score<l){e=s[c],t=i[c];break}}return setTimeout((function(){a.setState({score:Math.round(a.props.score)})}),500),n.a.createElement(f.a,{className:"flex-column justify-content-center popularity-display"},n.a.createElement("h3",null,"".concat(e," ").concat(t)),n.a.createElement("h4",null,"Popularity Score"),n.a.createElement(I.a,{className:"justify-content-center",style:{height:"75%"}},n.a.createElement(D.a,{value:this.state.score,text:this.state.score,background:!0,backgroundPadding:5})))}}]),a}(r.Component));C.a.defaults.global.defaultFontColor="white";var H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).chartRef=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){for(var e=this.props.data,t={labels:[],data:[]},a=0;a<e.length&&a<10;a++)t.labels.push(e[a].key),t.data.push(e[a].value);if(e.length>=10){for(var r=0,n=10;n<e.length;n++)r+=e[n].value;t.labels.push("Other"),t.data.push(r)}var s=t.data.reduce((function(e,t){return e+t}),0);t.data=t.data.map((function(e){return Math.round(e/s*100)})),new C.a(this.chartRef.current,{type:"doughnut",data:{labels:t.labels,datasets:[{label:"Genres",backgroundColor:["rgba(255, 221, 0, 0.8)","rgba(255, 200, 0, 0.8)","rgba(255,166,0, 0.8)","rgba(255,124,67, 0.8)","rgba(249,93,106, 0.8)","rgba(212,80,135, 0.8)","rgba(160,81,149, 0.8)","rgba(102,81,145, 0.8)","rgba(47,75,124, 0.8)","rgba(29, 52, 130, 0.8)","rgba(10, 36, 66, 0.8)"],borderColor:["rgba(255, 221, 0, 1)","rgba(255, 200, 0, 1)","rgba(255,166,0, 1)","rgba(255,124,67, 1)","rgba(249,93,106, 1)","rgba(212,80,135, 1)","rgba(160,81,149, 1)","rgba(102,81,145, 1)","rgba(47,75,124, 1)","rgba(29, 52, 130, 1)","rgba(10, 36, 66, 1)"],data:t.data}]},options:{legend:{position:"bottom"},responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(e,t){return t.labels[e.index]+": "+t.datasets[0].data[e.index]+"%"}}}}})}},{key:"render",value:function(){return n.a.createElement("div",{className:"doughnut-chart-container"},n.a.createElement("canvas",{ref:this.chartRef}))}}]),a}(n.a.Component),A=a(37),B=a(38),U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e,t,a=this.props,r=a.percent,s=a.descriptions,i=a.emojis,c="";if(r<0?(e=n.a.createElement(A.a,{icon:B.a,size:"lg",color:"red",style:{marginRight:"0.5em"}}),c=s[0]):0===r?c=s[1]:(e=n.a.createElement(A.a,{icon:B.b,size:"lg",color:"rgba(73, 209, 0, 1)",style:{marginRight:"0.5em"}}),c=s[2]),r>100)t=i[i.length-1];else if(r<-100)t=i[0];else{var o=200/i.length;t=i[Math.floor((r+100)/o)]}return n.a.createElement("div",null,n.a.createElement("span",{className:"emoji"}," ",t," "),n.a.createElement(I.a,{className:"d-flex flex-direction-column justify-content-center align-items-center"},e,n.a.createElement("h2",null,Math.abs(r),"%")),n.a.createElement("h5",null,c))}}]),a}(r.Component),G=a(39),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"averageFeatures",value:function(e){var t={};for(var a in e.forEach((function(e){for(var a in e)"id"!==a&&(t[a]?t[a]+=e[a]:t[a]=e[a])})),t)t[a]=t[a]/e.length;return t}},{key:"calculatePercentDifferences",value:function(e,t){var a={};for(var r in e){var n=Math.round((t[r]-e[r])/e[r]*100);a[r]=n}return a}},{key:"render",value:function(){var e=this,t=this.averageFeatures(this.props.recentTracksFeatures),a=this.averageFeatures(this.props.comparisonTracksFeatures[this.props.comparisonType]),r=this.calculatePercentDifferences(a,t),s=r.valence,i=r.danceability,c=r.energy,o=r.acousticness;return n.a.createElement(g.a,{bottom:!0},n.a.createElement("hr",null),n.a.createElement(G.a,{className:"mb-2"},n.a.createElement(h.a,{variant:"outline-success",className:"top"===this.props.comparisonType&&"active",type:"radio",name:"comparisonType",value:"top",onClick:function(t){return e.props.handleChange(t)},checked:"top"===this.props.time_range,defaultChecked:!0},"Today's Top Hits"),n.a.createElement(h.a,{variant:"outline-success",className:"short_term"===this.props.comparisonType&&"active",type:"radio",name:"comparisonType",value:"short_term",onClick:function(t){return e.props.handleChange(t)},checked:"short_term"===this.props.comparisonType},"Last Month"),n.a.createElement(h.a,{variant:"outline-success",className:"medium_term"===this.props.comparisonType&&"active",type:"radio",name:"comparisonType",value:"medium_term",onClick:function(t){return e.props.handleChange(t)},checked:"medium_term"===this.props.comparisonType},"Last 6 Months"),n.a.createElement(h.a,{variant:"outline-success",className:"long_term"===this.props.comparisonType&&"active",type:"radio",name:"comparisonType",value:"long_term",onClick:function(t){return e.props.handleChange(t)},checked:"long_term"===this.props.comparisonType},"All Time")),n.a.createElement(I.a,null,n.a.createElement(f.a,{md:3},n.a.createElement(U,{percent:s,descriptions:["Less happy","Same hapiness","Happier"],emojis:["\ud83d\ude2d","\ud83d\ude22","\ud83d\ude15","\ud83d\ude03","\ud83d\ude01","\ud83d\ude0a"]})),n.a.createElement(f.a,{md:3},n.a.createElement(U,{percent:i,descriptions:["Less danceable","Same danceability","More danceable"],emojis:["\ud83d\udc83"]})),n.a.createElement(f.a,{md:3},n.a.createElement(U,{percent:c,descriptions:["Less energetic","Same energy","More energetic"],emojis:["\ud83d\ude34","\u26a1\ufe0f","\ud83d\udd25"]})),n.a.createElement(f.a,{md:3},n.a.createElement(U,{percent:o,descriptions:["Less acoustic","Same acousticness","More acoustic"],emojis:["\ud83c\udfb8","\ud83c\udfbb"]})),n.a.createElement("hr",null)))}}]),a}(r.Component),W=a(153),V=a(90),Y=a(152),q=a(89),J=a(75),K=(a(128),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.title,r=e.color,s=e.tooltip,i=Object(V.a)({overrides:{MuiSlider:{valueLabel:{paddingLeft:"4px"},thumb:{width:"15px",height:"15px"},track:{height:"5px"},rail:{height:"5px",color:"#b1b1b1"}}}});return n.a.createElement("div",null,n.a.createElement("span",{className:"slider-title"},n.a.createElement(q.a,{placement:"right",overlay:function(e){return n.a.createElement(J.a,e,s)}},n.a.createElement("span",{className:"slider-name"},a)),n.a.createElement("span",{className:"slider-value"},t)),n.a.createElement(Y.a,{theme:i},n.a.createElement(W.a,{className:"slider--".concat(r),value:t,valueLabelDisplay:"auto"})))}}]),a}(r.Component)),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.track,t=["yellow","orange","red","purple","blue","light-blue","aqua","green"],a=["Based on the total number of plays the track has had and how recent those plays are","Describes the musical positiveness conveyed by a track","Describes how suitable a track is for dancing based on tempo, rhythm, beat, etc.","Represents a perceptual measure of intensity and activity","A confidence measure from 0.0 to 1.0 of whether the track is acoustic","Detects the presence of an audience in the recording","Speechiness detects the presence of spoken words in a track","Predicts whether a track contains no vocals"],r=[],s=0;for(var i in e.features){var c=e.features[i];"popularity"!==i&&(c=Math.round(100*c));var o=i.charAt(0).toUpperCase()+i.slice(1);"Valence"===o&&(o="Happiness"),r.push(n.a.createElement(K,{key:"".concat(i,"-slider"),title:o,value:c,color:t[s%t.length],tooltip:a[s]})),s++}return n.a.createElement(f.a,{className:"d-flex flex-column h-100 justify-content-between p-0"},r)}}]),a}(r.Component),X=a(91),Z=a(56);function $(e){var t=e.images.map((function(e){return n.a.createElement(Z.a.Item,{key:e.key},n.a.createElement("img",{src:e.url,alt:"album cover"}))}));return n.a.createElement(Z.a,{indicators:!1,controls:!1,fade:!1,interval:e.pause?null:5e3,onSelect:function(t){return e.handleSlide(t)},activeIndex:e.activeIndex},t)}a(71),a(72);var ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={trackIsPlaying:!1},r}return Object(o.a)(a,[{key:"handlePlayPause",value:function(e){"play"===e.type?this.setState({trackIsPlaying:!0}):"pause"===e.type&&this.setState({trackIsPlaying:!1})}},{key:"handleEnded",value:function(e){this.props.nextSlide(e),this.setState({trackIsPlaying:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement($,{images:this.props.trackImages,handleSlide:this.props.handleSlide,pause:this.state.trackIsPlaying,activeIndex:this.props.currentIndex}),n.a.createElement(X.a,{autoPlay:this.state.trackIsPlaying,src:this.props.currentTrack.previewURL,onPlay:function(t){return e.handlePlayPause(t)},onPause:function(t){return e.handlePlayPause(t)},onClickPrevious:function(t){return e.props.previousSlide(t)},onClickNext:function(t){return e.props.nextSlide(t)},onEnded:function(t){return e.handleEnded(t)},showFilledProgress:!1,showDownloadProgress:!1,showSkipControls:!0,showJumpControls:!1,customProgressBarSection:[],volume:.3,autoPlayAfterSrcChange:this.state.trackIsPlaying}))}}]),a}(r.Component),te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={currentTrack:r.props.tracks[0],currentIndex:0},r.handleSlide=r.handleSlide.bind(Object(F.a)(r)),r.nextSlide=r.nextSlide.bind(Object(F.a)(r)),r.previousSlide=r.previousSlide.bind(Object(F.a)(r)),r}return Object(o.a)(a,[{key:"handleSlide",value:function(e){this.setState({currentIndex:e,currentTrack:this.props.tracks[e]})}},{key:"nextSlide",value:function(){var e=(this.state.currentIndex+1)%this.props.tracks.length;this.setState({currentIndex:e,currentTrack:this.props.tracks[e]})}},{key:"previousSlide",value:function(){var e=0===this.state.currentIndex?this.props.tracks.length-1:this.state.currentIndex-1;this.setState({currentIndex:e,currentTrack:this.props.tracks[e]})}},{key:"render",value:function(){var e=this.props.tracks.map((function(e){return{key:e.id,url:e.image}}));return n.a.createElement("div",null,n.a.createElement("div",{style:{minHeight:"5em"}},n.a.createElement("h4",null,this.state.currentTrack.name),n.a.createElement("h6",null,this.state.currentTrack.artist)),n.a.createElement(I.a,{className:"d-flex justify-content-center mt-2"},n.a.createElement(f.a,{md:{span:6,order:2},className:"d-flex flex-column justify-content-center h-100"},n.a.createElement(ee,{trackImages:e,handleSlide:this.handleSlide,currentTrack:this.state.currentTrack,currentIndex:this.state.currentIndex,nextSlide:this.nextSlide,previousSlide:this.previousSlide})),n.a.createElement(f.a,{md:{span:6,order:1}},n.a.createElement(Q,{track:this.state.currentTrack}))))}}]),a}(r.Component),ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={isLoading:!0,comparisonType:"top",comparisonTracksFeatures:{},recentTracksFeatures:[],popularity:0,trackImages:[],uniqueRecentTracks:[],showComparison:!0},r.cycleComparisonTypes.bind(Object(F.a)(r)),r}return Object(o.a)(a,[{key:"getGenres",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){a.push(e.track.artists[0].id)})),"https://api.spotify.com/v1/artists",e.next=5,L.a.get("https://api.spotify.com/v1/artists",{headers:{Authorization:"Bearer ".concat(this.props.token)},params:{ids:a.join()}});case 5:return r=e.sent,n=new Map,r.data.artists.forEach((function(e){var t=e.genres[0];t&&n.get(t)?n.set(t,n.get(t)+1):n.set(t,1)})),s=[],n.forEach((function(e,t){s.push({key:t,value:e})})),s.sort((function(e,t){return t.value-e.value})),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComparisonFeatures",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r,n,s,i,c,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new N(this.props.token),r=["acousticness","danceability","energy","valence","popularity"],"top"!==t){e.next=16;break}return e.next=5,a.searchForPlaylist(["Today's top hits"],"Spotify");case 5:return n=e.sent,s=n[0].id,e.next=9,a.getPlaylist(s);case 9:return i=e.sent,e.next=12,a.getTrackFeatures(i.tracks,r);case 12:return c=e.sent,e.abrupt("return",c);case 16:return e.next=18,a.getUserFavorites("tracks",t,50);case 18:return o=e.sent,e.next=21,a.getTrackFeatures(o,r);case 21:return l=e.sent,e.abrupt("return",l);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleComparisonTypes",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,a=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["top","short_term","medium_term","long_term"],setInterval(Object(w.a)(j.a.mark((function e(){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.indexOf(a.state.comparisonType)+1,a.setState({showComparison:!1}),n=t[r%t.length],setTimeout((function(){a.setState({showComparison:!0,comparisonType:n})}),500);case 4:case"end":return e.stop()}}),e)}))),1e4);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,a,r,n,s,i,c,o,l,u,p,m,h,d,f,v,b,y,g,k,E,x;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new N(this.props.token),a=["acousticness","danceability","energy","instrumentalness","liveness","speechiness","valence","popularity"],e.next=5,t.getRecentTracks();case 5:return r=e.sent,e.next=8,t.getTrackFeatures(r,a);case 8:for(n=e.sent,s=[],i=0;i<r.length;i++)({}),o=r[i].track,l=n[i],u=l.popularity,p=l.valence,m=l.danceability,h=l.energy,d=l.acousticness,f=l.liveness,v=l.speechiness,b=l.instrumentalness,c={id:o.id,name:o.name,artist:o.artists[0].name,image:o.album.images[0].url,previewURL:o.preview_url,features:{popularity:u,valence:p,danceability:m,energy:h,acousticness:d,liveness:f,speechiness:v,instrumentalness:b}},s.push(c);return y=Array.from(new Set(s.map((function(e){return e.id})))).map((function(e){return s.find((function(t){return t.id===e}))})),e.next=14,this.getGenres(r);case 14:g=e.sent,k=0,n.forEach((function(e){k+=e.popularity})),k/=n.length,E={top:[],short_term:[],medium_term:[],long_term:[]},e.t0=j.a.keys(E);case 20:if((e.t1=e.t0()).done){e.next=27;break}return x=e.t1.value,e.next=24,this.getComparisonFeatures(x);case 24:E[x]=e.sent,e.next=20;break;case 27:this.setState({uniqueRecentTracks:y,recentTracksFeatures:n,comparisonTracksFeatures:E,popularity:k,genres:g,isLoading:!1}),this.props.load(),this.cycleComparisonTypes(),e.next=36;break;case 32:e.prev=32,e.t2=e.catch(0),console.log(e.t2),e.t2.response&&401===e.t2.response.status&&this.props.handleTimeout();case 36:case"end":return e.stop()}}),e,this,[[0,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value,n=t.type,s=t.checked;"checkbox"===n?this.setState(Object(P.a)({},a,s)):this.setState(Object(P.a)({},a,r))}},{key:"render",value:function(){var e=this,t="";switch(this.state.comparisonType){case"top":t="today's top hits";break;case"short_term":t="your last month";break;case"medium_term":t="your last 6 months";break;case"long_term":t="your all-time favorites"}return this.state.isLoading?null:n.a.createElement("div",null,n.a.createElement(g.a,null,n.a.createElement(f.a,{className:"mood-top-section d-flex flex-column"},n.a.createElement("header",null,"Your Mood"),n.a.createElement(M,{score:this.state.popularity}),n.a.createElement("h4",null,"How do your recent songs compare to"," ",n.a.createElement(R.a,{in:this.state.showComparison,timeout:500},n.a.createElement("span",{style:{color:"#1DB954",fontSize:"xx-large"}},t)),"?"),n.a.createElement(z,{percentages:this.state.percentages,recentTracksFeatures:this.state.recentTracksFeatures,comparisonTracksFeatures:this.state.comparisonTracksFeatures,comparisonType:this.state.comparisonType,showComparison:this.state.showComparison,handleChange:function(t){return e.handleChange(t)}})),n.a.createElement(v.a,{fluid:!0,className:"mb-4 mt-2"},n.a.createElement(te,{tracks:this.state.uniqueRecentTracks})),n.a.createElement("hr",null),n.a.createElement(v.a,{fluid:!0,className:" d-flex flex-column",style:{minHeight:"90vh"}},n.a.createElement(I.a,null,n.a.createElement(f.a,{className:"justify-content-center"},n.a.createElement("h2",null,"Your Recent Genres"),n.a.createElement(H,{data:this.state.genres}))))),n.a.createElement("hr",null))}}]),a}(r.Component),re=a(88),ne=a.n(re);function se(){return n.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},n.a.createElement(g.a,null,n.a.createElement("img",{src:ne.a,style:{maxHeight:"40vh",maxWidth:"80vw"},alt:"Cassette spinning loading animation"}),n.a.createElement("h1",null,"Loading your vibe...")))}a(132);var ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={isPlaying:!1,isHovering:!1},r.handleMouseHover=r.handleMouseHover.bind(Object(F.a)(r)),r}return Object(o.a)(a,[{key:"handleClick",value:function(){this.props.playTrack(this.props.previewURL)}},{key:"handleMouseHover",value:function(){this.setState(this.toggleHoverState)}},{key:"toggleHoverState",value:function(e){return{isHovering:!e.isHovering}}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.position,s=t.title,i=t.subtitle,c=t.searchTerm,o=t.image,l=t.isPlaying,u=-1===s.toLowerCase().indexOf(c.toLowerCase()),p=-1===i.toLowerCase().indexOf(c.toLowerCase());if(u&&p)return null;var m=n.a.createElement(g.a,null,n.a.createElement("div",{className:"result-item"},n.a.createElement("span",{className:"order-number"},r),n.a.createElement("span",{className:"result-info"},n.a.createElement("span",{className:"result-cover",style:{backgroundImage:"url(".concat(o,")")}}),n.a.createElement("span",{className:"result-summary"},n.a.createElement("span",{className:"result-artist"},i),n.a.createElement("span",{className:"result-name"},s))),n.a.createElement("div",{style:{marginLeft:"auto"}},l?n.a.createElement(b,null):this.state.isHovering&&n.a.createElement(A.a,{size:"3x",icon:B.c}))));return m="track"===a?this.props.previewURL?n.a.createElement("div",{onMouseEnter:this.handleMouseHover,onMouseLeave:this.handleMouseHover,onClick:function(){return e.handleClick()}},m):n.a.createElement("a",{onMouseEnter:this.handleMouseHover,onMouseLeave:this.handleMouseHover,href:this.props.uri,target:"_blank",rel:"noopener noreferrer"},m):n.a.createElement("a",{href:this.props.uri,rel:"noopener noreferrer",target:"_blank"},m)}}]),a}(n.a.Component),ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={currentlyPlaying:""},r.playTrack=r.playTrack.bind(Object(F.a)(r)),r}return Object(o.a)(a,[{key:"playTrack",value:function(e){var t=this,a=document.getElementById("favorite-player");a?(a.paused?(a.play(),this.setState({currentlyPlaying:e})):(a.pause(),this.setState({currentlyPlaying:""})),a.src!==e&&(a.currentTime=0,a.src=e,a.play(),this.setState({currentlyPlaying:e}))):((a=new Audio(e)).setAttribute("id","favorite-player"),a.onended=function(){return t.setState({currentlyPlaying:""})},a.volume=.3,document.getElementById("result-table").append(a),a.play(),this.setState({currentlyPlaying:e}))}},{key:"render",value:function(){var e,t=this;return e="tracks"===this.props.topType?this.props.data.map((function(e,a){return n.a.createElement(ie,{type:"track",position:a+1,key:e.id,title:e.name,subtitle:e.artists[0].name,image:void 0===e.album.images?null:e.album.images[0].url,previewURL:e.preview_url,uri:e.external_urls.spotify,searchTerm:t.props.searchTerm,playTrack:t.playTrack,isPlaying:t.state.currentlyPlaying===e.preview_url})})):this.props.data.map((function(e,a){return n.a.createElement(ie,{type:"artist",position:a+1,key:e.id,title:e.name,uri:e.external_urls.spotify,subtitle:e.genres.join(", "),image:void 0===e.images?null:e.images[0].url,searchTerm:t.props.searchTerm})})),n.a.createElement("div",{id:"result-table"},e||n.a.createElement("h3",{className:"no-results",style:{alignSelf:"center"}},"No Results"))}}]),a}(n.a.Component),oe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.props.isLoggedIn?null:n.a.createElement("div",null,n.a.createElement(I.a,{className:"d-flex justify-content-between p-4"},n.a.createElement(f.a,{md:4,className:"mb-4"},n.a.createElement("input",{className:"search-field",name:"searchTerm",value:this.props.searchTerm,type:"text",placeholder:"Search",onChange:function(t){return e.props.handleChange(t)}})),n.a.createElement(f.a,{md:4,className:"mb-4"},n.a.createElement(G.a,null,n.a.createElement(h.a,{variant:"outline-success",className:"short_term"===this.props.timeRange&&"active",type:"radio",name:"timeRange",value:"short_term",onClick:function(t){return e.props.handleChange(t)},checked:"short_term"===this.props.time_range,defaultChecked:!0},"Last Month"),n.a.createElement(h.a,{variant:"outline-success",className:"medium_term"===this.props.timeRange&&"active",type:"radio",name:"timeRange",value:"medium_term",onClick:function(t){return e.props.handleChange(t)},checked:"medium_term"===this.props.timeRange},"Last 6 Months"),n.a.createElement(h.a,{variant:"outline-success",className:"long_term"===this.props.timeRange&&"active",type:"radio",name:"timeRange",value:"long_term",onClick:function(t){return e.props.handleChange(t)},checked:"long_term"===this.props.timeRange},"All Time"))),n.a.createElement(f.a,{md:4,className:"mb-4"},n.a.createElement(G.a,null,n.a.createElement(h.a,{variant:"outline-success",className:"tracks"===this.props.topType&&"active",type:"radio",name:"topType",value:"tracks",onClick:function(t){return e.props.handleChange(t)},checked:"tracks"===this.props.topType,defaultChecked:!0},"Tracks"),n.a.createElement(h.a,{variant:"outline-success",className:"artists"===this.props.topType&&"active",type:"radio",name:"topType",value:"artists",onClick:function(t){return e.props.handleChange(t)},checked:"artists"===this.props.topType,defaultChecked:!0},"Artists")))))}}]),a}(n.a.Component),le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).handleChange=function(){var e=Object(w.a)(j.a.mark((function e(t){var a,n,s,i,c,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.name,s=a.value,i=a.type,c=a.checked,"topType"===n&&r.setState({data:[]}),e.next=4,i;case 4:if(e.t0=e.sent,"checkbox"!==e.t0){e.next=9;break}r.setState(Object(P.a)({},n,c)),e.next=10;break;case 9:r.setState(Object(P.a)({},n,s));case 10:return o=new N(r.props.token),e.next=13,o.getUserFavorites(r.state.topType,r.state.timeRange,50);case 13:l=e.sent,r.setState({data:l,isLoading:!1});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={isLoading:!0,data:[],timeRange:"short_term",searchTerm:"",topType:"tracks"},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N(this.props.token),e.next=3,t.getUserFavorites(this.state.topType,this.state.timeRange,50);case 3:a=e.sent,this.setState({data:a,isLoading:!1}),this.props.load();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoading?null:n.a.createElement("div",null,n.a.createElement(g.a,null,n.a.createElement("header",null,"Your Favorites"),n.a.createElement(oe,{handleChange:this.handleChange,timeRange:this.state.timeRange,topType:this.state.topType})),n.a.createElement(ce,{topType:this.state.topType,data:this.state.data,searchTerm:this.state.searchTerm}))}}]),a}(n.a.Component);function ue(){return n.a.createElement("footer",{className:"mt-2 mb-4"},n.a.createElement(g.a,null,n.a.createElement("h6",null,"Like what you see?"),n.a.createElement("h6",null,"Give this project a"," ",n.a.createElement("span",{role:"img","aria-label":"star emoji"},"\ud83c\udf1f")," ","on",n.a.createElement("a",{href:"https://github.com/Nicholas-Lin/vibe",target:"_blank",rel:"noopener noreferrer"}," ","Github.")),n.a.createElement("h6",null,"Share it with your friends"," ",n.a.createElement("span",{role:"img","aria-label":"star emoji"},"\ud83d\ude0e"))))}var pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={isLoading:!0,moodDashboardIsLoading:!0,vibeDashboardIsLoading:!0,favoritesDisplayIsLoading:!0},r}return Object(o.a)(a,[{key:"updateLoadingStatus",value:function(){this.state.moodDashboardIsLoading||this.state.vibeDashboardIsLoading||this.state.favoritesDisplayIsLoading||this.setState({isLoading:!1})}},{key:"loadMoodDashboard",value:function(){this.setState({moodDashboardIsLoading:!1}),this.updateLoadingStatus()}},{key:"loadVibeDashboard",value:function(){this.setState({vibeDashboardIsLoading:!1}),this.updateLoadingStatus()}},{key:"loadFavorites",value:function(){this.setState({favoritesDisplayIsLoading:!1}),this.updateLoadingStatus()}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,this.state.isLoading&&n.a.createElement(se,null),n.a.createElement(v.a,{fluid:"lg"},n.a.createElement(ae,{token:this.props.token,load:function(){return e.loadMoodDashboard()},handleTimeout:function(){return e.props.handleTimeout()}}),n.a.createElement(_,{token:this.props.token,load:function(){return e.loadVibeDashboard()}}),n.a.createElement(le,{token:this.props.token,load:function(){return e.loadFavorites()}}),n.a.createElement(ue,null)))}}]),a}(n.a.Component),me=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={isLoggedIn:!1,token:null},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=p.access_token;e&&this.setState({token:e})}},{key:"handleLogin",value:function(){window.location.replace(m),this.setState({isLoggedIn:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},!this.state.token&&n.a.createElement(k,{isLoggedIn:this.state.isLoggedIn,handleLogin:function(){return e.handleLogin()}}),this.state.token&&n.a.createElement(pe,{token:this.state.token,handleTimeout:function(){return e.handleLogin()}}))}}]),a}(n.a.Component);i.a.render(n.a.createElement(me,null),document.getElementById("root"))},72:function(e,t,a){},88:function(e,t,a){e.exports=a.p+"static/media/cassette.f720df37.gif"},92:function(e,t,a){e.exports=a(133)},98:function(e,t,a){},99:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.2d0c0112.chunk.js.map