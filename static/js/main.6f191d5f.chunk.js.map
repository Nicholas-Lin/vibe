{"version":3,"sources":["hash.js","config.js","Components/SubmitButton.js","Components/SoundWave.js","Views/Login.js","Components/Vibe/LineChart.js","Api.js","Components/Vibe/VibeDashboard.js","Components/Mood/PopularityDisplay.js","Components/Mood/DoughnutChart.js","Components/Mood/PercentDisplay.js","Components/Mood/ComparisonsDisplay.js","Components/Mood/ImageCarousel.js","Components/Mood/Slider.js","Components/Mood/TrackFeaturesDisplay.js","Components/Mood/CarouselPlayer.js","Components/Mood/RecentShowcase.js","Components/Mood/MoodDashboard.js","Components/Loading.js","Components/Favorites/ResultItem.js","Components/Favorites/ResultTable.js","Components/Favorites/SearchBar.js","Components/Favorites/FavoritesDisplay.js","Views/MainDisplay.js","App.js","index.js","Assets/cassette.gif"],"names":["hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","loginURL","process","join","SubmitButton","this","props","isLoggedIn","Button","className","variant","onClick","handleLogin","React","Component","SoundWave","Login","Container","Col","href","Chart","defaults","global","defaultFontColor","defaultColor","scale","gridLines","color","LineWithLine","line","controllers","extend","draw","ease","prototype","call","chart","tooltip","_active","length","activePoint","ctx","x","tooltipPosition","topY","legend","bottom","bottomY","chartArea","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","LineChart","chartRef","createRef","current","type","data","labels","datasets","map","dataset","label","borderColor","borderWidth","fill","backgroundColor","pointBackgroundColor","pointBorderWidth","pointBorderColor","pointRadius","pointHitRadius","pointHoverBackgroundColor","pointHoverBorderColor","options","maintainAspectRatio","tooltips","mode","intersect","titleFontColor","bodyFontColor","callbacks","tooltipItem","datasetIndex","Math","round","yLabel","title","description","ref","Api","api_token","token","time_range","limit","endpoint","axios","get","headers","Authorization","params","response","items","searchTerms","owner","q","res","result","playlists","filter","isTermInName","forEach","term","name","toLowerCase","includes","display_name","id","fields","tracks","features","ids","push","track","results","audio_features","trackFeatures","feature","correspondingTrack","find","popularity","Object","keys","VibeDashboard","state","isLoading","API","requestFeatures","searchForPlaylist","searchResults","Promise","all","a","getPlaylist","year","pop","playlist","setState","getTrackFeatures","playlistFeatures","computeFeatures","getUserFavorites","recentPlaylist","createGraphData","averageFeatures","acousticness","danceability","energy","valence","key","Number","EPSILON","averages","graphData","sortedByYearFeatures","concat","sort","b","localeCompare","unshift","formattedData","topSpotifyDatasets","averageSpotifyDatasets","spanGaps","load","chartDescriptions","fluid","Row","md","PopularityDisplay","emoji","score","ranges","descriptions","emojis","i","viewBox","d","strokeDasharray","y","textAnchor","dy","DoughnutChart","value","sum","position","responsive","PercentDisplay","arrow","percent","icon","faLongArrowAltDown","size","style","marginRight","faLongArrowAltUp","rangeSize","floor","abs","ComparisonsDisplay","percentages","ImageCarousel","carouselItems","images","image","Carousel","Item","src","url","alt","indicators","controls","fade","interval","pause","onSelect","e","handleSlide","activeIndex","Slider","muiTheme","createMuiTheme","overrides","MuiSlider","thumb","width","height","rail","OverlayTrigger","placement","overlay","Tooltip","ThemeProvider","theme","valueLabelDisplay","TrackFeaturesDisplay","COLORS","TOOLTIPS","sliders","index","charAt","toUpperCase","slice","CarouselPlayer","trackIsPlaying","nextSlide","trackImages","currentIndex","autoPlay","currentTrack","previewURL","onPlay","handlePlayPause","onPause","onClickPrevious","previousSlide","onClickNext","onEnded","handleEnded","showFilledProgress","showDownloadProgress","showSkipControls","showJumpControls","customProgressBarSection","volume","autoPlayAfterSrcChange","RecentShowcase","bind","newIndex","minHeight","artist","span","order","MoodDashboard","uniqueRecentTracks","originalObject","newObject","differences","percentDifference","artists","Map","genre","genres","set","val","getRecentTracks","recentTracks","recentTracksFeatures","averageRecentFeatures","formattedRecentTracks","liveness","speechiness","instrumentalness","formattedRecentTrack","album","preview_url","Array","from","Set","getGenres","playlistID","averagePlaylistFeatures","calculatePercentDifferences","popularityScore","console","log","status","handleTimeout","Loading","display","flexDirection","alignItems","justifyContent","cassette","maxHeight","maxWidth","ResultItem","subtitle","searchTerm","termNotInTitle","indexOf","termNotInSubtitle","backgroundImage","playTrack","ResultTable","activeTrack","document","querySelector","paused","play","currentTime","Audio","getElementById","append","topType","alignSelf","SearchBar","placeholder","onChange","handleChange","ButtonGroup","timeRange","checked","defaultChecked","FavoritesDisplay","event","target","MainDisplay","moodDashboardIsLoading","vibeDashboardIsLoading","favoritesDisplayIsLoading","updateLoadingStatus","Fragment","loadMoodDashboard","loadVibeDashboard","loadFavorites","App","_token","access_token","replace","ReactDOM","render","module","exports"],"mappings":"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","file":"static/js/main.6f191d5f.chunk.js","sourcesContent":["/**\r\n * File Name: hash.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Gets hash parameters from url\r\n */\r\n\r\nconst hash = window.location.hash\r\n  .substring(1)\r\n  .split(\"&\")\r\n  .reduce(function (initial, item) {\r\n    if (item) {\r\n      var parts = item.split(\"=\");\r\n      initial[parts[0]] = decodeURIComponent(parts[1]);\r\n    }\r\n    return initial;\r\n  }, {});\r\n//window.location.hash = \"\";\r\n\r\nexport default hash;\r\n","/**\r\n * File Name: config.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Sets up configuration for Spotify OAuth request\r\n */\r\n\r\nexport const authEndpoint = \"https://accounts.spotify.com/authorize\";\r\n\r\n// Uses environment variables from .env in root directory\r\nexport const clientId = process.env.REACT_APP_SPOTIFY_CLIENT_ID;\r\nexport const redirectUri = process.env.REACT_APP_REDIRECT_URI;\r\n\r\nexport const scopes = [\r\n  \"playlist-read-private\",\r\n  \"user-top-read\",\r\n  \"user-read-recently-played\",\r\n];\r\nexport const loginURL = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n  \"%20\"\r\n)}&response_type=token&show_dialog=true`;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nclass SubmitButton extends React.Component {\r\n  render() {\r\n    if (this.props.isLoggedIn) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        <Button\r\n          className=\"submit-button\"\r\n          variant=\"success\"\r\n          onClick={() => this.props.handleLogin()}\r\n        >\r\n          Login with Spotify\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SubmitButton;\r\n","import React from \"react\";\r\nimport \"../sound-wave.css\";\r\n\r\nfunction SoundWave() {\r\n  return (\r\n    <div className=\"sound-icon disabled\">\r\n      <div className=\"sound-wave\">\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n        <i className=\"bar\"></i>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SoundWave;\r\n","/**\r\n * File Name: Login.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Login page and landing page of the website\r\n */\r\n\r\nimport React from \"react\";\r\nimport SubmitButton from \"../Components/SubmitButton\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport SoundWave from \"../Components/SoundWave\";\r\n\r\nfunction Login(props) {\r\n  if (props.isLoggedIn) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Col className=\"d-flex align-items-center flex-column login justify-content-center\">\r\n        <header> Vibe </header>\r\n        <SoundWave />\r\n        <SubmitButton\r\n          isLoggedIn={props.isLoggedIn}\r\n          handleLogin={() => props.handleLogin()}\r\n        />\r\n        <h5 className=\"mt-5\">Get insights into your vibe.</h5>\r\n        <h6 className=\"mt-5\">Your information will not be stored.</h6>\r\n        <h6>\r\n          {\" \"}\r\n          Created by{\" \"}\r\n          <a href=\"https://nicholas-lin.github.io/\"> Nicholas Lin. </a> Powered\r\n          by{\" \"}\r\n          <a href=\"https://developer.spotify.com/documentation/web-api/\">\r\n            {\" \"}\r\n            Spotify's API.{\" \"}\r\n          </a>{\" \"}\r\n        </h6>\r\n      </Col>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport Chart from \"chart.js\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nChart.defaults.global.defaultFontColor = \"white\";\r\nChart.defaults.global.defaultColor = \"white\";\r\nChart.defaults.scale.gridLines.color = \"rgb(83,83,83)\";\r\nChart.defaults.LineWithLine = Chart.defaults.line;\r\nChart.controllers.LineWithLine = Chart.controllers.line.extend({\r\n  draw: function (ease) {\r\n    Chart.controllers.line.prototype.draw.call(this, ease);\r\n\r\n    if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\r\n      let activePoint = this.chart.tooltip._active[0];\r\n      let ctx = this.chart.ctx;\r\n      let x = activePoint.tooltipPosition().x;\r\n      let topY = this.chart.legend.bottom;\r\n      let bottomY = this.chart.chartArea.bottom;\r\n\r\n      // let meta = this.getMeta();\r\n      // meta.data.forEach((element) => {\r\n      //   if (element._model.x === x) {\r\n      //     topY = element._model.y;\r\n      //     bottomY = y;\r\n      //   }\r\n      // });\r\n\r\n      ctx.save();\r\n      ctx.beginPath();\r\n      ctx.moveTo(x, topY);\r\n      ctx.lineTo(x, bottomY);\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeStyle = \"rgb(255, 255, 255, 0.5)\";\r\n      ctx.stroke();\r\n      ctx.restore();\r\n    }\r\n  },\r\n});\r\n\r\nclass LineChart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.chartRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    new Chart(this.chartRef.current, {\r\n      type: \"LineWithLine\",\r\n      data: {\r\n        labels: this.props.data.labels,\r\n        datasets: this.props.data.datasets.map((dataset) => {\r\n          return {\r\n            data: dataset.data,\r\n            label: dataset.label,\r\n            borderColor: dataset.borderColor,\r\n            borderWidth: 2,\r\n            fill: dataset.fill,\r\n            backgroundColor: dataset.backgroundColor,\r\n\r\n            pointBackgroundColor: dataset.borderColor,\r\n            pointBorderWidth: 1,\r\n            pointBorderColor: \"black\",\r\n            pointRadius: 5,\r\n            pointHitRadius: 6,\r\n            pointHoverBackgroundColor: \"black\",\r\n            pointHoverBorderColor: dataset.borderColor,\r\n          };\r\n        }),\r\n      },\r\n      options: {\r\n        maintainAspectRatio: false,\r\n        tooltips: {\r\n          mode: \"index\",\r\n          intersect: false,\r\n          titleFontColor: \"black\",\r\n          bodyFontColor: \"black\",\r\n          backgroundColor: \"rgba(255, 255, 255, 0.9)\",\r\n          callbacks: {\r\n            label: function (tooltipItem, data) {\r\n              var label = data.datasets[tooltipItem.datasetIndex].label || \"\";\r\n\r\n              if (label) {\r\n                label += \": \";\r\n              }\r\n              label += Math.round(tooltipItem.yLabel);\r\n              return label;\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Col className=\" h-100 d-flex flex-column justify-content-between align-items-center p-0\">\r\n        <h3>{this.props.title}</h3>\r\n        <p>{this.props.description}</p>\r\n        <div className=\"line-chart-container\">\r\n          <canvas ref={this.chartRef} />\r\n        </div>\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LineChart;\r\n","import axios from \"axios\";\r\nclass Api {\r\n  constructor(api_token) {\r\n    this.token = api_token;\r\n  }\r\n\r\n  /**\r\n   * Gets users top tracks/artists in a given time range:\r\n   * https://developer.spotify.com/documentation/web-api/reference/personalization/get-users-top-artists-and-tracks/\r\n   * @param  {string} type - The type of entity to return. Valid values: artists or tracks.\r\n   * @param {string} time_range - Over what time frame the affinities are computed. Valid values: long_term, medium_term, short_term\r\n   * @param {number} limit - The number of entities to return. Default: 20. Minimum: 1. Maximum: 50.\r\n   * @return An array of track or artists objects\r\n   */\r\n  async getUserFavorites(type, time_range, limit = 20) {\r\n    const endpoint = `https://api.spotify.com/v1/me/top/${type}`;\r\n    const response = await axios.get(endpoint, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.token}`,\r\n      },\r\n      params: {\r\n        time_range: time_range,\r\n        limit: limit,\r\n      },\r\n    });\r\n    return response.data.items;\r\n  }\r\n\r\n  /**\r\n   * Searches spotify for a playlist given search terms and the owner\r\n   * @param  {Array<string>} searchTerms - An array of search terms\r\n   * @param {string} owner - The owner of the playlist\r\n   * @return playlist object with id and name fields\r\n   */\r\n  async searchForPlaylist(searchTerms, owner) {\r\n    const endpoint = \"https://api.spotify.com/v1/search\";\r\n    let res = await axios.get(endpoint, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.token}`,\r\n      },\r\n      params: {\r\n        q: searchTerms.join(\"%20\"),\r\n        type: \"playlist\",\r\n        limit: \"10\",\r\n      },\r\n    });\r\n    const result = res.data.playlists.items.filter((item) => {\r\n      let isTermInName = true;\r\n      // Checks if search terms are in the name of the playlist\r\n      searchTerms.forEach((term) => {\r\n        isTermInName =\r\n          isTermInName && item.name.toLowerCase().includes(term.toLowerCase());\r\n      });\r\n      // If the search terms in name and owner matches playlist owner name return item\r\n      return (\r\n        isTermInName &&\r\n        item.owner.display_name.toLowerCase().includes(owner.toLowerCase())\r\n      );\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Gets details of a playlist given the id\r\n   * @param  {string} id - The id of the playlist\r\n   * @return an object containing the name and tracks of the playlist\r\n   */\r\n  async getPlaylist(id) {\r\n    const endpoint = \"https://api.spotify.com/v1/playlists/\";\r\n    let res = await axios.get(`${endpoint}${id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.token}`,\r\n      },\r\n      params: {\r\n        fields: \"name,tracks.items(track)\",\r\n      },\r\n    });\r\n    return {\r\n      name: res.data.name,\r\n      tracks: res.data.tracks.items,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Gets an array of 50 tracks that the user recently played\r\n   * @return {Array<SimpleTrack>} - An array of simple track objects from Spotify\r\n   */\r\n  async getRecentTracks() {\r\n    const endpoint = \"https://api.spotify.com/v1/me/player/recently-played\";\r\n    let res = await axios.get(endpoint, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.token}`,\r\n      },\r\n      params: {\r\n        limit: 50,\r\n      },\r\n    });\r\n    return res.data.items;\r\n  }\r\n\r\n  /**\r\n   * Gets the features of an array of tracks\r\n   * @param  {Array<SimpleTrackObject>} tracks - An array of Spotify tracks to analyze\r\n   * @return {Array<Objects>} - An array of objects that contain trackID, acousticness, danceability, energy, valence, and popularity properties\r\n   */\r\n  async getTrackFeatures(tracks, features) {\r\n    let ids = [];\r\n    tracks.forEach((item) => {\r\n      ids.push(item.track.id);\r\n    });\r\n    const endpoint = \"https://api.spotify.com/v1/audio-features\";\r\n    let res = await axios.get(endpoint, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.token}`,\r\n      },\r\n      params: {\r\n        ids: ids.join(),\r\n      },\r\n    });\r\n    let results = [];\r\n    res.data.audio_features.forEach((trackFeatures) => {\r\n      let result = {};\r\n      features.forEach((feature) => {\r\n        if (feature === \"popularity\") {\r\n          const correspondingTrack = tracks.find(\r\n            (item) => item.track.id === trackFeatures.id\r\n          );\r\n          result[feature] = correspondingTrack.track.popularity;\r\n        } else if (Object.keys(trackFeatures).includes(feature)) {\r\n          result[feature] = trackFeatures[feature];\r\n        }\r\n      });\r\n      results.push(result);\r\n    });\r\n    return results;\r\n  }\r\n}\r\n\r\nexport default Api;\r\n","import React from \"react\";\r\nimport LineChart from \"./LineChart\";\r\nimport Api from \"../../Api\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nclass VibeDashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: this.props.token,\r\n      data: [],\r\n      features: [],\r\n      isLoading: true,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const API = new Api(this.props.token);\r\n    const requestFeatures = [\r\n      \"id\",\r\n      \"acousticness\",\r\n      \"danceability\",\r\n      \"energy\",\r\n      \"valence\",\r\n    ];\r\n    const searchResults = await API.searchForPlaylist(\r\n      [\"Your Top Songs\"],\r\n      \"Spotify\"\r\n    );\r\n    await Promise.all(\r\n      searchResults.map(async (item) => {\r\n        // If search result is a top track playlist\r\n        if (item.name.length === 19) {\r\n          let response = await API.getPlaylist(item.id);\r\n          const year = response.name.split(\" \").pop();\r\n          const playlist = {\r\n            year: year,\r\n            tracks: response.tracks,\r\n          };\r\n          this.setState({\r\n            data: [...this.state.data, playlist],\r\n          });\r\n          const playlistFeatures = await API.getTrackFeatures(\r\n            playlist.tracks,\r\n            requestFeatures\r\n          );\r\n          this.computeFeatures(year, playlistFeatures);\r\n        }\r\n      })\r\n    );\r\n    let recentPlaylist = await API.getUserFavorites(\r\n      \"tracks\",\r\n      \"medium_term\",\r\n      50\r\n    );\r\n    // Workaround for get track features\r\n    recentPlaylist = recentPlaylist.map((item) => {\r\n      return { track: item };\r\n    });\r\n    const playlistFeatures = await API.getTrackFeatures(\r\n      recentPlaylist,\r\n      requestFeatures\r\n    );\r\n    this.computeFeatures(\"2020\", playlistFeatures);\r\n    this.createGraphData();\r\n  }\r\n\r\n  computeFeatures(year, playlistFeatures) {\r\n    let averageFeatures = {\r\n      acousticness: 0,\r\n      danceability: 0,\r\n      energy: 0,\r\n      valence: 0,\r\n    };\r\n    playlistFeatures.forEach((track) => {\r\n      for (let key in track) {\r\n        if (key !== \"id\") {\r\n          averageFeatures[key] += track[key];\r\n        }\r\n      }\r\n    });\r\n    for (let key in averageFeatures) {\r\n      averageFeatures[key] =\r\n        Math.round(\r\n          ((averageFeatures[key] * 100) / playlistFeatures.length +\r\n            Number.EPSILON) *\r\n            100\r\n        ) / 100;\r\n    }\r\n    this.setState({\r\n      features: [\r\n        ...this.state.features,\r\n        {\r\n          year: year,\r\n          averages: averageFeatures,\r\n        },\r\n      ],\r\n    });\r\n  }\r\n\r\n  createGraphData() {\r\n    let graphData = {\r\n      acousticness: [],\r\n      danceability: [],\r\n      energy: [],\r\n      valence: [],\r\n    };\r\n    let sortedByYearFeatures = []\r\n      .concat(this.state.features)\r\n      .sort((a, b) => a.year.localeCompare(b.year));\r\n\r\n    // TESTING\r\n    // sortedByYearFeatures = [\r\n    //   {\r\n    //     averages: {\r\n    //       acousticness: 1,\r\n    //       danceability: 1,\r\n    //       energy: 2,\r\n    //       valence: 3,\r\n    //     },\r\n    //     year: \"2019\",\r\n    //   },\r\n    //   {\r\n    //     averages: {\r\n    //       acousticness: 1,\r\n    //       danceability: 1,\r\n    //       energy: 2,\r\n    //       valence: 3,\r\n    //     },\r\n    //     year: \"2020\",\r\n    //   },\r\n    // ];\r\n\r\n    // console.log(sortedByYearFeatures);\r\n    sortedByYearFeatures.forEach((year) => {\r\n      for (let key in year.averages) {\r\n        graphData[key].push(year.averages[key]);\r\n      }\r\n    });\r\n\r\n    for (let key in graphData) {\r\n      while (graphData[key].length < 5) {\r\n        graphData[key].unshift(null);\r\n      }\r\n    }\r\n\r\n    // console.log(graphData);\r\n    let formattedData = {};\r\n\r\n    const topSpotifyDatasets = {\r\n      acousticness: [15.88, 16.63, 19.57, 22.16, 21.39],\r\n      danceability: [63.25, 69.68, 71.65, 71.38, 71.99],\r\n      energy: [67.24, 66.07, 65.91, 64.06, 65.05],\r\n      valence: [45.15, 51.7, 48.44, 54.6, 53.1],\r\n    };\r\n\r\n    const averageSpotifyDatasets = {\r\n      acousticness: [28.03, 28.99, 27.19, 28.93, 24.74],\r\n      danceability: [60, 61.23, 66.5, 64.42, 67.31],\r\n      energy: [59.29, 58.67, 59.06, 57.88, 61.19],\r\n      valence: [43.08, 41.45, 44.71, 46.59, 48.28],\r\n    };\r\n    // console.log(graphData);\r\n    for (const feature in graphData) {\r\n      formattedData[feature] = {\r\n        labels: [\"2016\", \"2017\", \"2018\", \"2019\", \"2020\"],\r\n        datasets: [\r\n          {\r\n            data: graphData[feature],\r\n            label: \"Your Top Songs\",\r\n            fill: true,\r\n            borderColor: \"rgba(29,185,84,1)\",\r\n            backgroundColor: \"rgba(29,185,84,0.4)\",\r\n            spanGaps: false,\r\n          },\r\n          {\r\n            data: averageSpotifyDatasets[feature],\r\n            label: \"Average Song\",\r\n            fill: false,\r\n            borderColor: \"rgba(255, 255, 255, 0.9)\",\r\n          },\r\n          {\r\n            data: topSpotifyDatasets[feature],\r\n            label: \"Top Spotify Songs\",\r\n            fill: false,\r\n            borderColor: \"rgba(255,99,132,1)\",\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    // console.log(formattedData);\r\n    this.setState({ formattedData: formattedData, isLoading: false });\r\n    this.props.load();\r\n  }\r\n  render() {\r\n    const chartDescriptions = {\r\n      valence:\r\n        \"Describes the musical positiveness conveyed by a track. Tracks with high valence sound more positive, while tracks with low valence sound more negative.\",\r\n      danceability:\r\n        \"Describes how suitable a track is for dancing based on a combination of musical elements.\",\r\n      energy:\r\n        \"Represents a perceptual measure of intensity and activity based on dynamic range, general entropy, etc.\",\r\n      acousticness:\r\n        \"A confidence measure from 0 to 100 of whether the track is acoustic. 100 represents high confidence the track is acoustic.\",\r\n    };\r\n    return (\r\n      !this.state.isLoading && (\r\n        <div>\r\n          <Container fluid=\"lg\">\r\n            <header>Your Vibe</header>\r\n            <Row className=\"mt-4 mb-4\">\r\n              <Col md={6} className=\"mt-4 mb-4\">\r\n                <LineChart\r\n                  title=\"Valence (Happiness)\"\r\n                  description={chartDescriptions.valence}\r\n                  data={this.state.formattedData.valence}\r\n                />\r\n              </Col>\r\n              <Col md={6} className=\"mt-4 mb-4\">\r\n                <LineChart\r\n                  title=\"Danceability\"\r\n                  description={chartDescriptions.danceability}\r\n                  data={this.state.formattedData.danceability}\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"mb-4\">\r\n              <Col md={6} className=\"mt-4 mb-4\">\r\n                <LineChart\r\n                  title=\"Energy\"\r\n                  description={chartDescriptions.energy}\r\n                  data={this.state.formattedData.energy}\r\n                />\r\n              </Col>\r\n              <Col md={6} className=\"mt-4 mb-4\">\r\n                <LineChart\r\n                  title=\"Acousticness\"\r\n                  description={chartDescriptions.acousticness}\r\n                  data={this.state.formattedData.acousticness}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n          <hr />\r\n        </div>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nexport default VibeDashboard;\r\n","import React, { Component } from \"react\";\r\nimport \"../../progress-circle.css\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nclass PopularityDisplay extends Component {\r\n  render() {\r\n    let { score } = this.props;\r\n    const ranges = [0, 30, 50, 70, 90, 100];\r\n    const descriptions = [\r\n      \"Hipster\",\r\n      \"Eccentric\",\r\n      \"Trendy\",\r\n      \"Mainstream\",\r\n      \"Basic\",\r\n    ];\r\n    const emojis = [\"🧐\", \"🤔\", \"😎\", \"🤩\", \"💁‍♀️\"];\r\n    let description, emoji;\r\n\r\n    for (let i = 0; i < ranges.length - 1; i++) {\r\n      const lowerBound = ranges[i];\r\n      const upperBound = ranges[i + 1];\r\n      if (score >= lowerBound && score < upperBound) {\r\n        description = descriptions[i];\r\n        emoji = emojis[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Col className=\"d-flex flex-column justify-content-center h-100\">\r\n        <svg viewBox=\"0 0 36 36\" className=\"circular-chart green\">\r\n          <path\r\n            className=\"circle-bg\"\r\n            d=\"M18 2.0845\r\n          a 15.9155 15.9155 0 0 1 0 31.831\r\n          a 15.9155 15.9155 0 0 1 0 -31.831\"\r\n          />\r\n          <path\r\n            className=\"circle\"\r\n            strokeDasharray=\"60, 100\"\r\n            d=\"M18 2.0845\r\n          a 15.9155 15.9155 0 0 1 0 31.831\r\n          a 15.9155 15.9155 0 0 1 0 -31.831\"\r\n          />\r\n          <text\r\n            x=\"50%\"\r\n            y=\"50%\"\r\n            textAnchor=\"middle\"\r\n            dy=\".35em\"\r\n            className=\"percentage\"\r\n          >\r\n            {Math.round(score)}\r\n          </text>\r\n        </svg>\r\n        <h3>{\"Popularity Score: \"}{`${description} ${emoji}`}</h3>\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PopularityDisplay;\r\n","import React from \"react\";\r\nimport Chart from \"chart.js\";\r\nChart.defaults.global.defaultFontColor = \"white\";\r\n//Chart.defaults.global.defaultColor = \"white\";\r\n\r\nclass DoughnutChart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.chartRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    const { data } = this.props;\r\n    const limit = 10;\r\n    let formattedData = {\r\n      labels: [],\r\n      data: [],\r\n    };\r\n\r\n    for (let i = 0; i < data.length && i < limit; i++) {\r\n      formattedData.labels.push(data[i].key);\r\n      formattedData.data.push(data[i].value);\r\n    }\r\n    if (data.length >= limit) {\r\n      let sum = 0;\r\n      for (let i = limit; i < data.length; i++) {\r\n        sum += data[i].value;\r\n      }\r\n      formattedData.labels.push(\"Other\");\r\n      formattedData.data.push(sum);\r\n    }\r\n\r\n    const sum = formattedData.data.reduce((a, b) => a + b, 0);\r\n    formattedData.data = formattedData.data.map((item) =>\r\n      Math.round((item / sum) * 100)\r\n    );\r\n\r\n    new Chart(this.chartRef.current, {\r\n      type: \"doughnut\",\r\n      data: {\r\n        labels: formattedData.labels,\r\n        datasets: [\r\n          {\r\n            label: \"Genres\",\r\n            backgroundColor: [\r\n              \"rgba(255, 221, 0, 0.8)\",\r\n              \"rgba(255, 200, 0, 0.8)\",\r\n              \"rgba(255,166,0, 0.8)\",\r\n              \"rgba(255,124,67, 0.8)\",\r\n              \"rgba(249,93,106, 0.8)\",\r\n              \"rgba(212,80,135, 0.8)\",\r\n              \"rgba(160,81,149, 0.8)\",\r\n              \"rgba(102,81,145, 0.8)\",\r\n              \"rgba(47,75,124, 0.8)\",\r\n              \"rgba(29, 52, 130, 0.8)\",\r\n              \"rgba(10, 36, 66, 0.8)\",\r\n            ],\r\n            borderColor: [\r\n              \"rgba(255, 221, 0, 1)\",\r\n              \"rgba(255, 200, 0, 1)\",\r\n              \"rgba(255,166,0, 1)\",\r\n              \"rgba(255,124,67, 1)\",\r\n              \"rgba(249,93,106, 1)\",\r\n              \"rgba(212,80,135, 1)\",\r\n              \"rgba(160,81,149, 1)\",\r\n              \"rgba(102,81,145, 1)\",\r\n              \"rgba(47,75,124, 1)\",\r\n              \"rgba(29, 52, 130, 1)\",\r\n              \"rgba(10, 36, 66, 1)\",\r\n            ],\r\n            data: formattedData.data,\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        legend: {\r\n          position: \"bottom\",\r\n        },\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        tooltips: {\r\n          callbacks: {\r\n            label: function (tooltipItem, data) {\r\n              return (\r\n                data[\"labels\"][tooltipItem[\"index\"]] +\r\n                \": \" +\r\n                data[\"datasets\"][0][\"data\"][tooltipItem[\"index\"]] +\r\n                \"%\"\r\n              );\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doughnut-chart-container\">\r\n        <canvas ref={this.chartRef} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DoughnutChart;\r\n","import React, { Component } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faLongArrowAltUp,\r\n  faLongArrowAltDown,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nclass PercentDisplay extends Component {\r\n  render() {\r\n    let { percent, descriptions, emojis } = this.props;\r\n    let description = \"\";\r\n    let arrow, emoji;\r\n    if (percent < 0) {\r\n      arrow = (\r\n        <FontAwesomeIcon\r\n          icon={faLongArrowAltDown}\r\n          size=\"lg\"\r\n          color=\"red\"\r\n          style={{ marginRight: \"0.5em\" }}\r\n        />\r\n      );\r\n      description = descriptions[0];\r\n    } else if (percent === 0) {\r\n      description = descriptions[1];\r\n    } else {\r\n      arrow = (\r\n        <FontAwesomeIcon\r\n          icon={faLongArrowAltUp}\r\n          size=\"lg\"\r\n          color=\"rgba(73, 209, 0, 1)\"\r\n          style={{ marginRight: \"0.5em\" }}\r\n        />\r\n      );\r\n      description = descriptions[2];\r\n    }\r\n\r\n    if (percent > 100) {\r\n      emoji = emojis[emojis.length - 1];\r\n    } else if (percent < -100) {\r\n      emoji = emojis[0];\r\n    } else {\r\n      const rangeSize = 200 / emojis.length;\r\n      const index = Math.floor((percent + 100) / rangeSize);\r\n      emoji = emojis[index];\r\n    }\r\n\r\n    return (\r\n      <div className=\"mb-3\">\r\n        <span className=\"emoji\"> {emoji} </span>\r\n        <Row className=\"d-flex flex-direction-column justify-content-center align-items-center\">\r\n          {arrow}\r\n          <h2>{Math.abs(percent)}%</h2>\r\n        </Row>\r\n        <h5>{description}</h5>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PercentDisplay;\r\n","import React from \"react\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport PercentDisplay from \"./PercentDisplay\";\r\n\r\nexport default function ComparisonsDisplay(props) {\r\n  const { valence, danceability, energy, acousticness } = props.percentages;\r\n  return (\r\n    <Row>\r\n      <hr />\r\n      <Col md={3}>\r\n        <PercentDisplay\r\n          percent={valence}\r\n          descriptions={[\"Less happy\", \"Same hapiness\", \"Happier\"]}\r\n          emojis={[\"😭\", \"😢\", \"😕\", \"😃\", \"😁\", \"😊\"]}\r\n        />\r\n      </Col>\r\n      <Col md={3}>\r\n        <PercentDisplay\r\n          percent={danceability}\r\n          descriptions={[\r\n            \"Less danceable\",\r\n            \"Same danceability\",\r\n            \"More danceable\",\r\n          ]}\r\n          emojis={[\"💃\"]}\r\n        />\r\n      </Col>\r\n      <Col md={3}>\r\n        <PercentDisplay\r\n          percent={energy}\r\n          descriptions={[\"Less energetic\", \"Same energy\", \"More energetic\"]}\r\n          emojis={[\"😴\", \"⚡️\", \"🔥\"]}\r\n        />\r\n      </Col>\r\n      <Col md={3}>\r\n        <PercentDisplay\r\n          percent={acousticness}\r\n          descriptions={[\"Less acoustic\", \"Same acousticness\", \"More acoustic\"]}\r\n          emojis={[\"🎸\", \"🎻\"]}\r\n        />\r\n      </Col>\r\n      <hr />\r\n    </Row>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Carousel from \"react-bootstrap/Carousel\";\r\n\r\nexport function ImageCarousel(props) {\r\n  const carouselItems = props.images.map((image) => (\r\n    <Carousel.Item key={image.key}>\r\n      <img src={image.url} alt=\"album cover\" />\r\n    </Carousel.Item>\r\n  ));\r\n  return (\r\n    <Carousel\r\n      indicators={false}\r\n      controls={false}\r\n      fade={false}\r\n      interval={props.pause ? null : 5000}\r\n      onSelect={(e) => props.handleSlide(e)}\r\n      activeIndex={props.activeIndex}\r\n    >\r\n      {carouselItems}\r\n    </Carousel>\r\n  );\r\n}\r\n","/**\r\n * File Name: Slider.js\r\n * Author: Nicholas Lin\r\n * Date: 7/13/20\r\n * Description: Displays contents for the \"Your Mood\" section\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport MUISlider from \"@material-ui/core/Slider\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\nimport Tooltip from \"react-bootstrap/Tooltip\";\r\n\r\nimport \"./slider.css\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport { ImageCarousel } from \"./ImageCarousel\";\r\n\r\nclass Slider extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { value, title, color, tooltip } = this.props;\r\n    const muiTheme = createMuiTheme({\r\n      overrides: {\r\n        MuiSlider: {\r\n          thumb: {\r\n            width: \"15px\",\r\n            height: \"15px\"\r\n          },\r\n          track: {\r\n            height: \"5px\"\r\n          },\r\n          rail: {\r\n            height: \"5px\",\r\n            color: \"#b1b1b1\",\r\n          },\r\n        },\r\n      },\r\n    });\r\n    const renderTooltip = (props) => <Tooltip {...props}>{tooltip}</Tooltip>;\r\n\r\n    return (\r\n      <div>\r\n        <span className=\"slider-title\">\r\n          <OverlayTrigger placement=\"right\" overlay={renderTooltip}>\r\n            <span className=\"slider-name\">{title}</span>\r\n          </OverlayTrigger>\r\n          <span className=\"slider-value\">{value}</span>\r\n        </span>\r\n\r\n        <ThemeProvider theme={muiTheme}>\r\n          <MUISlider\r\n            className={`slider--${color}`}\r\n            value={value}\r\n            valueLabelDisplay=\"auto\"\r\n          />\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","/**\r\n * File Name: TrackFeaturesDisplay.js\r\n * Author: Nicholas Lin\r\n * Date: 7/13/20\r\n * Description: Displays contents for the \"Your Mood\" section\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport Slider from \"./Slider\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport { ImageCarousel } from \"./ImageCarousel\";\r\n\r\nclass TrackFeaturesDisplay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { track } = this.props;\r\n    const COLORS = [\r\n      \"yellow\",\r\n      \"orange\",\r\n      \"red\",\r\n      \"purple\",\r\n      \"blue\",\r\n      \"light-blue\",\r\n      \"aqua\",\r\n      \"green\",\r\n    ];\r\n    const TOOLTIPS = [\r\n      \"Based on the total number of plays the track has had and how recent those plays are\",\r\n      \"Describes the musical positiveness conveyed by a track\",\r\n      \"Describes how suitable a track is for dancing based on tempo, rhythm, beat, etc.\",\r\n      \"Represents a perceptual measure of intensity and activity\",\r\n      \"A confidence measure from 0.0 to 1.0 of whether the track is acoustic\",\r\n      \"Detects the presence of an audience in the recording\",\r\n      \"Speechiness detects the presence of spoken words in a track\",\r\n      \"Predicts whether a track contains no vocals\",\r\n    ];\r\n    const sliders = [];\r\n    let index = 0;\r\n    for (const feature in track.features) {\r\n      let value = track.features[feature];\r\n      if (feature !== \"popularity\") {\r\n        value = Math.round(value * 100);\r\n      }\r\n      let title = feature.charAt(0).toUpperCase() + feature.slice(1);\r\n      if (title === \"Valence\") title = \"Happiness\";\r\n      sliders.push(\r\n        <Slider\r\n          key={`${feature}-slider`}\r\n          title={title}\r\n          value={value}\r\n          color={COLORS[index % COLORS.length]}\r\n          tooltip={TOOLTIPS[index]}\r\n        />\r\n      );\r\n      index++;\r\n    }\r\n\r\n    return (\r\n      <Col className=\"d-flex flex-column h-100 justify-content-between p-0\">\r\n        {sliders}\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TrackFeaturesDisplay;\r\n","/**\r\n * File Name: AudioPlayer.js\r\n * Author: Nicholas Lin\r\n * Date: 7/13/20\r\n * Description: Displays contents for the \"Your Mood\" section\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport AudioPlayer from \"react-h5-audio-player\";\r\nimport { ImageCarousel } from \"./ImageCarousel\";\r\nimport \"react-h5-audio-player/lib/styles.css\";\r\nimport \"./audio-player.css\";\r\n\r\nclass CarouselPlayer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      trackIsPlaying: false,\r\n    };\r\n    //If user plays track => pause carousel\r\n    //If user skips track while track is playing => go to next slide and play\r\n    //If user skips track while track is not playing => go to next slide and do not play\r\n\r\n    //If user pauses track => resume carousel && do not play next track\r\n    //If track ends => resume carousel && play next track\r\n  }\r\n\r\n  handlePlayPause(e) {\r\n    if (e.type === \"play\") {\r\n      this.setState({ trackIsPlaying: true });\r\n    } else if (e.type === \"pause\") {\r\n      this.setState({ trackIsPlaying: false });\r\n    }\r\n  }\r\n\r\n  handleEnded(e) {\r\n    this.props.nextSlide(e);\r\n    this.setState({ trackIsPlaying: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ImageCarousel\r\n          images={this.props.trackImages}\r\n          handleSlide={this.props.handleSlide}\r\n          pause={this.state.trackIsPlaying}\r\n          activeIndex={this.props.currentIndex}\r\n        />\r\n\r\n        <AudioPlayer\r\n          autoPlay={this.state.trackIsPlaying}\r\n          src={this.props.currentTrack.previewURL}\r\n          onPlay={(e) => this.handlePlayPause(e)}\r\n          onPause={(e) => this.handlePlayPause(e)}\r\n          onClickPrevious={(e) => this.props.previousSlide(e)}\r\n          onClickNext={(e) => this.props.nextSlide(e)}\r\n          onEnded={(e) => this.handleEnded(e)}\r\n          showFilledProgress={false}\r\n          showDownloadProgress={false}\r\n          showSkipControls={true}\r\n          showJumpControls={false}\r\n          customProgressBarSection={[]}\r\n          volume={0.2}\r\n          autoPlayAfterSrcChange={this.state.trackIsPlaying}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CarouselPlayer;\r\n","/**\r\n * File Name: RecentShowcase.js\r\n * Author: Nicholas Lin\r\n * Date: 7/13/20\r\n * Description: Displays contents for the \"Your Mood\" section\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport TrackFeaturesDisplay from \"./TrackFeaturesDisplay\";\r\nimport { ImageCarousel } from \"./ImageCarousel\";\r\n\r\nimport CarouselPlayer from \"./CarouselPlayer\";\r\nimport \"react-h5-audio-player/lib/styles.css\";\r\nimport \"./audio-player.css\";\r\n\r\nclass RecentShowcase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentTrack: this.props.tracks[0],\r\n      currentIndex: 0\r\n    };\r\n    this.handleSlide = this.handleSlide.bind(this);\r\n    this.nextSlide = this.nextSlide.bind(this);\r\n    this.previousSlide = this.previousSlide.bind(this);\r\n  }\r\n\r\n  handleSlide(e) {\r\n    this.setState({ currentIndex: e, currentTrack: this.props.tracks[e] });\r\n  }\r\n\r\n  nextSlide() {\r\n    const newIndex = (this.state.currentIndex + 1) % this.props.tracks.length\r\n    this.setState({ currentIndex: newIndex, currentTrack: this.props.tracks[newIndex] });\r\n  }\r\n\r\n  previousSlide() {\r\n    const newIndex = this.state.index === 0 ? this.props.tracks.length - 1 : --this.state.index\r\n    this.setState({ currentIndex: newIndex, currentTrack: this.props.tracks[newIndex] });\r\n  }\r\n\r\n  render() {\r\n    const trackImages = this.props.tracks.map((track) => {\r\n      return { key: track.id, url: track.image };\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ minHeight: \"5em\" }}>\r\n          <h4>{this.state.currentTrack.name}</h4>\r\n          <h6>{this.state.currentTrack.artist}</h6>\r\n        </div>\r\n        <Row className=\"d-flex justify-content-center mt-2\">\r\n          <Col\r\n            md={{ span: 6, order: 2 }}\r\n            className=\"d-flex flex-column justify-content-center h-100\"\r\n          >\r\n            <CarouselPlayer\r\n              trackImages={trackImages}\r\n              handleSlide={this.handleSlide}\r\n              currentTrack={this.state.currentTrack}\r\n              currentIndex={this.state.currentIndex}\r\n              nextSlide={this.nextSlide}\r\n              previousSlide={this.previousSlide}\r\n            />\r\n          </Col>\r\n          <Col md={{ span: 6, order: 1 }}>\r\n            <TrackFeaturesDisplay track={this.state.currentTrack} />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RecentShowcase;\r\n","/**\r\n * File Name: MoodDashboard.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Displays contents for the \"Your Mood\" section\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport axios from \"axios\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport PopularityDisplay from \"./PopularityDisplay\";\r\nimport DoughnutChart from \"./DoughnutChart\";\r\nimport ComparisonsDisplay from \"./ComparisonsDisplay\";\r\nimport Api from \"../../Api\";\r\nimport RecentShowcase from \"./RecentShowcase\";\r\n\r\nclass MoodDashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true,\r\n      percentages: {},\r\n      popularity: 0,\r\n      trackImages: [],\r\n      uniqueRecentTracks: [],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Computes the averages of an array of features of tracks\r\n   * @param  {Array<Features>} tracks - An array of track features\r\n   * @return {Array<Objects>} - An array of objects that contain trackID, acousticness, danceability, energy, and valence properties\r\n   */\r\n  averageFeatures(tracks) {\r\n    let averages = {};\r\n    tracks.forEach((track) => {\r\n      for (let key in track) {\r\n        if (key !== \"id\") {\r\n          if (!averages[key]) {\r\n            averages[key] = track[key];\r\n          } else {\r\n            averages[key] += track[key];\r\n          }\r\n        }\r\n      }\r\n    });\r\n    for (let key in averages) {\r\n      averages[key] = averages[key] / tracks.length;\r\n    }\r\n    return averages;\r\n  }\r\n\r\n  /**\r\n   * Returns the percent difference between the properties the newObject compared to the properties of the originalObject.\r\n   * @param  {Object} originalObject- The original object that will be compared against\r\n   * @param  {Object} newObject- The new object that will be compared to the original object\r\n   * @return An object containing the same properties with the percent difference as values\r\n   */\r\n  calculatePercentDifferences(originalObject, newObject) {\r\n    let differences = {};\r\n    for (const key in originalObject) {\r\n      const percentDifference = Math.round(\r\n        ((newObject[key] - originalObject[key]) / originalObject[key]) * 100\r\n      );\r\n      differences[key] = percentDifference;\r\n    }\r\n    return differences;\r\n  }\r\n\r\n  /**\r\n   * Gets the genres for a an array of tracks\r\n   * @param  {Array<Simple Track Objects>} tracks - The array of tracks to get the genres of\r\n   * @return An array of objects with key and value properties key=genre, value=track count\r\n   */\r\n  async getGenres(tracks) {\r\n    let ids = [];\r\n    tracks.forEach((item) => {\r\n      ids.push(item.track.artists[0].id);\r\n    });\r\n    const endpoint = \"https://api.spotify.com/v1/artists\";\r\n    let res = await axios.get(endpoint, {\r\n      headers: {\r\n        Authorization: `Bearer ${this.props.token}`,\r\n      },\r\n      params: {\r\n        ids: ids.join(),\r\n      },\r\n    });\r\n    let map = new Map();\r\n    res.data.artists.forEach((artist) => {\r\n      // artist.genres.forEach((genre) => {\r\n      //   if (map.get(genre)) {\r\n      //     map.set(genre, map.get(genre) + 1);\r\n      //   } else {\r\n      //     map.set(genre, 1);\r\n      //   }\r\n      // });\r\n\r\n      // Get the first genre category for each song\r\n      const genre = artist.genres[0];\r\n      if (genre && map.get(genre)) {\r\n        map.set(genre, map.get(genre) + 1);\r\n      } else {\r\n        map.set(genre, 1);\r\n      }\r\n    });\r\n\r\n    let results = [];\r\n    map.forEach((val, key) => {\r\n      results.push({\r\n        key: key,\r\n        value: val,\r\n      });\r\n    });\r\n    // Sort in decreasing value order\r\n    results.sort((a, b) => b.value - a.value);\r\n    return results;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const API = new Api(this.props.token);\r\n      let requestFeatures = [\r\n        \"acousticness\",\r\n        \"danceability\",\r\n        \"energy\",\r\n        \"instrumentalness\",\r\n        \"liveness\",\r\n        \"speechiness\",\r\n        \"valence\",\r\n        \"popularity\",\r\n      ];\r\n      const recentTracks = await API.getRecentTracks();\r\n      const recentTracksFeatures = await API.getTrackFeatures(\r\n        recentTracks,\r\n        requestFeatures\r\n      );\r\n\r\n      const averageRecentFeatures = this.averageFeatures(recentTracksFeatures);\r\n      let formattedRecentTracks = [];\r\n      for (let i = 0; i < recentTracks.length; i++) {\r\n        let formattedRecentTrack = {};\r\n        const track = recentTracks[i].track;\r\n        const {\r\n          popularity,\r\n          valence,\r\n          danceability,\r\n          energy,\r\n          acousticness,\r\n          liveness,\r\n          speechiness,\r\n          instrumentalness,\r\n        } = recentTracksFeatures[i];\r\n\r\n        formattedRecentTrack = {\r\n          id: track.id,\r\n          name: track.name,\r\n          artist: track.artists[0].name,\r\n          image: track.album.images[0].url,\r\n          previewURL: track.preview_url,\r\n          features: {\r\n            popularity,\r\n            valence,\r\n            danceability,\r\n            energy,\r\n            acousticness,\r\n            liveness,\r\n            speechiness,\r\n            instrumentalness,\r\n          },\r\n        };\r\n        formattedRecentTracks.push(formattedRecentTrack);\r\n      }\r\n\r\n      const uniqueRecentTracks = Array.from(\r\n        new Set(formattedRecentTracks.map((item) => item.id))\r\n      ).map((id) => {\r\n        return formattedRecentTracks.find((item) => item.id === id);\r\n      });\r\n      const genres = await this.getGenres(recentTracks);\r\n      const searchResults = await API.searchForPlaylist(\r\n        [\"Today's top hits\"],\r\n        \"Spotify\"\r\n      );\r\n      const playlistID = searchResults[0].id;\r\n      const playlist = await API.getPlaylist(playlistID);\r\n      requestFeatures = [\r\n        \"acousticness\",\r\n        \"danceability\",\r\n        \"energy\",\r\n        \"valence\",\r\n        \"popularity\",\r\n      ];\r\n      const playlistFeatures = await API.getTrackFeatures(\r\n        playlist.tracks,\r\n        requestFeatures\r\n      );\r\n      const averagePlaylistFeatures = this.averageFeatures(playlistFeatures);\r\n      const differences = this.calculatePercentDifferences(\r\n        averagePlaylistFeatures,\r\n        averageRecentFeatures\r\n      );\r\n      const popularityScore = averageRecentFeatures.popularity;\r\n      this.setState({\r\n        uniqueRecentTracks,\r\n        percentages: differences,\r\n        popularity: popularityScore,\r\n        genres,\r\n        isLoading: false,\r\n      });\r\n      this.props.load();\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response && error.response.status === 401)\r\n        this.props.handleTimeout();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return this.state.isLoading ? null : (\r\n      <div>\r\n        <Container fluid className=\" d-flex flex-column mood-top-section\">\r\n          <header>Your Mood</header>\r\n          <h2>How do your recent songs compare to today's top hits?</h2>\r\n          <PopularityDisplay score={this.state.popularity} />\r\n          <ComparisonsDisplay percentages={this.state.percentages} />\r\n        </Container>\r\n        <Container className={\"mb-4 mt-2\"}>\r\n          <RecentShowcase tracks={this.state.uniqueRecentTracks} />\r\n        </Container>\r\n\r\n\r\n\r\n\r\n        <hr />\r\n        <Container\r\n          fluid\r\n          className=\" d-flex flex-column\"\r\n          style={{ minHeight: \"90vh\" }}\r\n        >\r\n          <Row>\r\n            <Col className=\"justify-content-center\">\r\n              <h2>{\"Your Recent Genres\"}</h2>\r\n              <DoughnutChart data={this.state.genres} />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoodDashboard;\r\n","import React from \"react\";\r\nimport cassette from \"../Assets/cassette.gif\";\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n      }}\r\n    >\r\n      <img\r\n        src={cassette}\r\n        style={{ maxHeight: \"40vh\", maxWidth: \"80vw\" }}\r\n        alt=\"Cassette spinning loading animation\"\r\n      />\r\n      <h1>Loading your vibe...</h1>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../../result.css\";\r\n\r\nfunction ResultItem(props) {\r\n  const {\r\n    type,\r\n    position,\r\n    title,\r\n    subtitle,\r\n    searchTerm,\r\n    image,\r\n    previewURL,\r\n  } = props;\r\n\r\n  // Track name does not contain the search term\r\n  const termNotInTitle = title.toLowerCase().indexOf(searchTerm) === -1;\r\n  // Artist name does not contain the search term\r\n  const termNotInSubtitle = subtitle.toLowerCase().indexOf(searchTerm) === -1;\r\n\r\n  // If search term not in track then do not render\r\n  if (termNotInTitle && termNotInSubtitle) {\r\n    return null;\r\n  }\r\n\r\n  const item = (\r\n    <div className=\"result-item\">\r\n      <span className=\"order-number\">{position}</span>\r\n      <span className=\"result-info\">\r\n        <span\r\n          className=\"result-cover\"\r\n          style={{ backgroundImage: `url(${image})` }}\r\n        ></span>\r\n        <span className=\"result-summary\">\r\n          <span className=\"result-artist\">{subtitle}</span>\r\n          <span className=\"result-name\">{title}</span>\r\n        </span>\r\n      </span>\r\n    </div>\r\n  );\r\n\r\n  return type === \"track\" ? (\r\n    <div onClick={() => props.playTrack(previewURL)}>{item}</div>\r\n  ) : (\r\n    <div>{item}</div>\r\n  );\r\n}\r\n\r\nexport default ResultItem;\r\n","import React from \"react\";\r\nimport ResultItem from \"./ResultItem\";\r\n\r\nclass ResultTable extends React.Component {\r\n  playTrack(previewURL) {\r\n    let activeTrack = document.querySelector(\"audio\");\r\n    if (!activeTrack) {\r\n      activeTrack = new Audio(previewURL);\r\n      activeTrack.volume = 0.25;\r\n      document.getElementById(\"result-table\").append(activeTrack);\r\n      activeTrack.play();\r\n    } else {\r\n      activeTrack.paused ? activeTrack.play() : activeTrack.pause();\r\n      if (activeTrack.src !== previewURL) {\r\n        activeTrack.currentTime = 0;\r\n        activeTrack.src = previewURL;\r\n        activeTrack.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let results;\r\n    if (this.props.topType === \"tracks\") {\r\n      results = this.props.data.map((track, index) => (\r\n        <ResultItem\r\n          type=\"track\"\r\n          position={index + 1}\r\n          key={track.id}\r\n          title={track.name}\r\n          subtitle={track.artists[0].name}\r\n          image={track.album.images[0].url}\r\n          previewURL={track.preview_url}\r\n          searchTerm={this.props.searchTerm}\r\n          playTrack={this.playTrack}\r\n        />\r\n      ));\r\n    } else {\r\n      results = this.props.data.map((artist, index) => (\r\n        <ResultItem\r\n          type=\"artist\"\r\n          position={index + 1}\r\n          key={artist.id}\r\n          title={artist.name}\r\n          subtitle={artist.genres.join(\", \")}\r\n          image={artist.images[0].url}\r\n          searchTerm={this.props.searchTerm}\r\n        />\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <div id=\"result-table\">\r\n        {results ? (\r\n          results\r\n        ) : (\r\n          <h3 className=\"no-results\" style={{ alignSelf: \"center\" }}>\r\n            No Results\r\n          </h3>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ResultTable;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\r\n\r\nclass SearchBar extends React.Component {\r\n  render() {\r\n    if (this.props.isLoggedIn) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        <Row className=\"d-flex justify-content-between p-4\">\r\n          <Col md={4} className=\"mb-4\">\r\n            <input\r\n              className=\"search-field\"\r\n              name=\"searchTerm\"\r\n              value={this.props.searchTerm}\r\n              type=\"text\"\r\n              placeholder=\"Search\"\r\n              onChange={(e) => this.props.handleChange(e)}\r\n            ></input>\r\n          </Col>\r\n          <Col md={4} className=\"mb-4\">\r\n            <ButtonGroup>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                className={this.props.timeRange === \"short_term\" && \"active\"}\r\n                type=\"radio\"\r\n                name=\"timeRange\"\r\n                value=\"short_term\"\r\n                onClick={(e) => this.props.handleChange(e)}\r\n                checked={this.props.time_range === \"short_term\"}\r\n                defaultChecked\r\n              >\r\n                Last Month\r\n              </Button>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                className={this.props.timeRange === \"medium_term\" && \"active\"}\r\n                type=\"radio\"\r\n                name=\"timeRange\"\r\n                value=\"medium_term\"\r\n                onClick={(e) => this.props.handleChange(e)}\r\n                checked={this.props.timeRange === \"medium_term\"}\r\n              >\r\n                Last 6 Months\r\n              </Button>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                className={this.props.timeRange === \"long_term\" && \"active\"}\r\n                type=\"radio\"\r\n                name=\"timeRange\"\r\n                value=\"long_term\"\r\n                onClick={(e) => this.props.handleChange(e)}\r\n                checked={this.props.timeRange === \"long_term\"}\r\n              >\r\n                All Time\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Col>\r\n          <Col md={4} className=\"mb-4\">\r\n            <ButtonGroup>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                className={this.props.topType === \"tracks\" && \"active\"}\r\n                type=\"radio\"\r\n                name=\"topType\"\r\n                value=\"tracks\"\r\n                onClick={(e) => this.props.handleChange(e)}\r\n                checked={this.props.topType === \"tracks\"}\r\n                defaultChecked\r\n              >\r\n                Tracks\r\n              </Button>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                className={this.props.topType === \"artists\" && \"active\"}\r\n                type=\"radio\"\r\n                name=\"topType\"\r\n                value=\"artists\"\r\n                onClick={(e) => this.props.handleChange(e)}\r\n                checked={this.props.topType === \"artists\"}\r\n                defaultChecked\r\n              >\r\n                Artists\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import React from \"react\";\r\nimport ResultTable from \"./ResultTable\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport Api from \"../../Api\";\r\n\r\nclass FavoritesDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true,\r\n      data: [],\r\n      timeRange: \"short_term\",\r\n      searchTerm: \"\",\r\n      topType: \"tracks\",\r\n    };\r\n  }\r\n\r\n  handleChange = async (event) => {\r\n    const { name, value, type, checked } = event.target;\r\n    if (name === \"topType\") {\r\n      this.setState({ data: [] });\r\n    }\r\n    (await type) === \"checkbox\"\r\n      ? this.setState({ [name]: checked })\r\n      : this.setState({ [name]: value });\r\n\r\n    const API = new Api(this.props.token);\r\n    const response = await API.getUserFavorites(\r\n      this.state.topType,\r\n      this.state.timeRange,\r\n      50\r\n    );\r\n    this.setState({ data: response, isLoading: false });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const API = new Api(this.props.token);\r\n    const response = await API.getUserFavorites(\r\n      this.state.topType,\r\n      this.state.timeRange,\r\n      50\r\n    );\r\n    this.setState({ data: response, isLoading: false });\r\n    this.props.load();\r\n  }\r\n\r\n  render() {\r\n    return this.state.isLoading ? null : (\r\n      <div>\r\n        <header>Your Favorites</header>\r\n        <SearchBar\r\n          handleChange={this.handleChange}\r\n          timeRange={this.state.timeRange}\r\n          topType={this.state.topType}\r\n        />\r\n        <ResultTable\r\n          topType={this.state.topType}\r\n          data={this.state.data}\r\n          searchTerm={this.state.searchTerm}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FavoritesDisplay;\r\n","/**\r\n * File Name: MainDisplay.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Main display after login\r\n */\r\n\r\nimport React from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport VibeDashboard from \"../Components/Vibe/VibeDashboard\";\r\nimport MoodDashboard from \"../Components/Mood/MoodDashboard\";\r\nimport Loading from \"../Components/Loading\";\r\nimport FavoritesDisplay from \"../Components/Favorites/FavoritesDisplay\";\r\nclass MainDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true,\r\n      moodDashboardIsLoading: true,\r\n      vibeDashboardIsLoading: true,\r\n      favoritesDisplayIsLoading: true,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Updates the loading status of the component based on loading status of child components\r\n   */\r\n  updateLoadingStatus() {\r\n    if (\r\n      !this.state.moodDashboardIsLoading &&\r\n      !this.state.vibeDashboardIsLoading &&\r\n      !this.state.favoritesDisplayIsLoading\r\n    ) {\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the loading status of the mood dashboard in the state\r\n   */\r\n  loadMoodDashboard() {\r\n    this.setState({\r\n      moodDashboardIsLoading: false,\r\n    });\r\n    this.updateLoadingStatus();\r\n  }\r\n\r\n  /**\r\n   * Updates the loading status of the vibe dashboard in the state\r\n   */\r\n  loadVibeDashboard() {\r\n    this.setState({\r\n      vibeDashboardIsLoading: false,\r\n    });\r\n    this.updateLoadingStatus();\r\n  }\r\n\r\n  /**\r\n   * Updates the loading status of the favorites display in the state\r\n   */\r\n  loadFavorites() {\r\n    this.setState({\r\n      favoritesDisplayIsLoading: false,\r\n    });\r\n    this.updateLoadingStatus();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.isLoading && <Loading />}\r\n        <Container fluid=\"lg\">\r\n          <MoodDashboard\r\n            token={this.props.token}\r\n            load={() => this.loadMoodDashboard()}\r\n            handleTimeout={() => this.props.handleTimeout()}\r\n          />\r\n          <VibeDashboard\r\n            token={this.props.token}\r\n            load={() => this.loadVibeDashboard()}\r\n          />\r\n          <FavoritesDisplay\r\n            token={this.props.token}\r\n            load={() => this.loadFavorites()}\r\n          />\r\n        </Container>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MainDisplay;\r\n","/**\r\n * File Name: App.js\r\n * Author: Nicholas Lin\r\n * Date: 7/11/20\r\n * Description: Main entrypoint of react app\r\n */\r\n\r\nimport React from \"react\";\r\nimport \"./App.css\";\r\nimport hash from \"./hash\";\r\nimport { loginURL } from \"./config\";\r\n\r\nimport Login from \"./Views/Login\";\r\nimport MainDisplay from \"./Views/MainDisplay\";\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoggedIn: false,\r\n      token: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let _token = hash.access_token;\r\n    if (_token) {\r\n      // Set token\r\n      this.setState({\r\n        token: _token,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleLogin() {\r\n    window.location.replace(loginURL);\r\n    this.setState({\r\n      isLoggedIn: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        {!this.state.token && (\r\n          <Login\r\n            isLoggedIn={this.state.isLoggedIn}\r\n            handleLogin={() => this.handleLogin()}\r\n          />\r\n        )}\r\n        {this.state.token && (\r\n          <MainDisplay\r\n            token={this.state.token}\r\n            handleTimeout={() => this.handleLogin()}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/cassette.f720df37.gif\";"],"sourceRoot":""}